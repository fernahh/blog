<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <link rel="canonical" href="https://fernahh.com.br/estado-em-componentes-web/">

    <title>Estado em componentes web | @fernahh</title>

    <link rel="apple-touch-icon" href="/apple-touch-icon.jpg" />
    <link rel="icon" href="/favicon-cd3c3b6e.png" />

    <meta name="description" content="Antes de querer frameworks como React e Angular2, você precisa aprender sobre estado de componentes. Esse artigo busca mostrar a evolução desse paradigma e mostrando o que são stateful e stateless components."></meta>
    <meta property="og:type" content="article"></meta>
    <meta property="og:title" content="Estado em componentes web | @fernahh."></meta>
    <meta property="og:site_name" content="Olá, eu sou o @fernahh!"></meta>
    <meta property="og:description" content="Antes de querer frameworks como React e Angular2, você precisa aprender sobre estado de componentes. Esse artigo busca mostrar a evolução desse paradigma e mostrando o que são stateful e stateless components."></meta>

    <meta name="twitter:card  " content="summary"></meta>
    <meta name="twitter:site" content="fernahh."></meta>
    <meta name="twitter:creator" content="@fernahh"></meta>
    <meta name="twitter:url" content="https://fernahh.com.br/estado-em-componentes-web/"></meta>
    <meta name="twitter:title" content="Estado em componentes web | @fernahh."></meta>
    <meta name="twiter:description" content="Antes de querer frameworks como React e Angular2, você precisa aprender sobre estado de componentes. Esse artigo busca mostrar a evolução desse paradigma e mostrando o que são stateful e stateless components."></meta>

    <link href="https://fonts.googleapis.com/css?family=Assistant:400,700" rel="stylesheet" />
    <link href="../assets/stylesheets/application-b72b1f41.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="estado-em-componentes-web estado-em-componentes-web_index">
    <div class="Container">
        <header class="Header__Article">
    <h3>
<a href="/" class="Header__Article__Link" title="Link para a página inicial">        @fernahh
</a>    </h3>
  </header>
  <article class="Article" role="article">
    <header>
    <time class="Post_Index__Date" datetime="2017/01/16">
      Publicado em: 16/01/2017</time>
      <h1 class="Article__Title">Estado em componentes web</h1>
    </header>
    <section>
      <p>Nunca se falou tanto em componentes para a web como no último ano. O <a href="https://facebook.github.io/react/">React</a>, biblioteca que tem como objetivo facilitar o desenvolvimento de aplicações com componentes, se tornou líder de mercado. Outros frameworks surgiram com a mesma finalidade, e até mesmo a versão <a href="https://docs.angularjs.org/guide/component">1.x do AngularJS</a> dá suporte ao padrão de desenvolvimento baseado em componentes.</p>

<p>Vamos ver aqui um dos principais conceitos que precisamos saber quando vamos desenvolver algo dessa forma, <strong>stateful</strong> e <strong>stateless components</strong>.</p>

<h2>Os conceitos</h2>

<p>Toda aplicação tem um estado. Através dele, temos acesso a informações que podem ser lidas e modificadas, dependendo do paradigma em que a aplicação foi escrita.</p>

<p>Quando falamos de componentes, eles podem ter seus próprios estados ou somente fazer leitura do estado de outro componente. Sendo assim, classificamos eles de duas formas: <strong>stateful</strong> e <strong>stateless.</strong></p>

<h3>Stateful</h3>

<p>Chamamos algo de stateful quando ele possui informações sobre o estado da aplicação, além de poder modificá-lo, sabendo quais foram as mudanças no passado, presente e (as vezes) as futuras.
Podemos exemplificar isso através de uma função impura:</p>
<div class="highlight"><pre class="highlight javascript"><code>  <span class="c1">// estado.</span>
  <span class="kd">const</span> <span class="nx">position</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// função impura: tem acesso há um</span>
  <span class="c1">// estado que não faz parte de seu</span>
  <span class="c1">// escopo.</span>
  <span class="kd">const</span> <span class="nx">increment</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">position</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

  <span class="nx">increment</span><span class="p">();</span> <span class="c1">// retorna 2.</span>
</code></pre></div>
<h3>Stateless</h3>

<p>Diferentemente de algo stateful, quando temos aplicações, funções ou componentes stateless, sabemos que ele não tem informação sobre o estado. Sendo assim, o termo stateless nos diz que um determido instrumento não muta o estado de algo, assim temos a previsiblidade de que dada uma entrada, teremos sempre a mesma saída.</p>
<div class="highlight"><pre class="highlight javascript"><code>  <span class="c1">// estado.</span>
  <span class="kd">const</span> <span class="nx">position</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// função pura: ao invés de ter</span>
  <span class="c1">// ter acesso ao estado, ela</span>
  <span class="c1">// recebe o estado como parâmetro.</span>
  <span class="kd">const</span> <span class="nx">increment</span> <span class="o">=</span> <span class="nx">p</span> <span class="o">=&gt;</span> <span class="nx">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

  <span class="nx">increment</span><span class="p">();</span> <span class="c1">// retorna 2.</span>
</code></pre></div>
<h2>Componentes na era pré-React</h2>

<p>O tópico &ldquo;componentes&rdquo; não é novo. Há muito tempo o mercado exigia produtividade maior no desenvolvimento de produtos web. Antes mesmo da era dos frameworks, já tínhamos tentativas de resolver esse problema.</p>

<p>A primeira grande biblioteca que tentou reutilizar código a fim de agilizar o desenvolvimento front-end foi a <a href="https://jqueryui.com/">jQueryUI</a>. Ela tem suas soluções baseadas em JavaScript. Porém, com a evolução do CSS, novos frameworks surgiram sem o uso pesado de script. O primeiro e sem dúvidas mais popular, foi o <a href="http://getbootstrap.com/">Bootstrap</a>.</p>

<h3>Bootstrap</h3>

<p>Apesar de não ser pioneiro, podemos dizer que o Bootstrap foi quem popularizou a ideia de componentes para a web. Reza a lenda que <em>1% da web já foi desenvolvida com esse framework</em>. Caso você já tenha sacado a diferença dos conceitos, já deve saber que os componentes do Bootstrap são exclusivamente <strong>stateless</strong>. Isso porque eles não guardam e nem podem mudar o estado da aplicação (ao menos se você forçar isso, rs).</p>

<p>O ponto negativo de componentes agnósticos a frameworks, como o Bootstrap, é que para “plugá-los” a sua aplicação, você deverá fazer um <em>wrapper</em> para controle de estados. É por esse motivo que existem forks de outros frameworks como <a href="https://material.angularjs.org/latest/">AngularMaterial</a> ou <a href="https://react-bootstrap.github.io/">React-Bootstrap</a>. No caso do AngularMaterial, os componentes são escritos com diretivas.</p>

<h3>Diretivas do AngularJS</h3>

<p>As diretivas do Angular 1.x popularizaram os chamados <em>custom components</em>. Através delas podemos inserir comportamento em um elemento do DOM, controlando ele e seus filhos. Caso você nunca tenha tido contato com diretivas, sugiro que dê uma <a href="https://docs.angularjs.org/guide/directive">lida na documentação</a>.</p>

<p>De forma resumida, podemos dizer que uma diretiva nada mais é que uma marcação em um elemento HTML que será interpretada pelo Angular. A sacada boa que o framework teve foi basear-se nas ideias da especificação dos <a href="https://www.w3.org/wiki/WebComponents/">Web Components</a>. Tanto que um dos maiores interessados nessa especificação era o Google, dono do AngularJS.</p>

<p>Para entendermos melhor, vamos ver um exemplo na prática. Abaixo temos uma diretiva que representa um componente de alerta.</p>

<p data-height="265" data-theme-id="dark" data-slug-hash="zNGoyM" data-default-tab="js,result" data-user="lfernahh" data-embed-version="2" data-pen-title="Alert Directive" class="codepen">See the Pen <a href="http://codepen.io/lfernahh/pen/zNGoyM/">Alert Directive</a> by Luiz Fernando Rodrigues (<a href="http://codepen.io/lfernahh">@lfernahh</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

<p>Essa diretiva é stateless. Porém, o controle do estado da aplicação pode ser facilmente violado através do <code>$scope</code> e <code>$rootScope</code> . Ambos os valores dão acesso a outros escopos da aplicação, o que pode ser perigoso se você não tiver um bom controle em seu código.</p>

<p>É recomendado que quando você for escrever um componente usando uma diretiva, sempre deixe o escopo dela isolado através de um objeto literal:</p>
<div class="highlight"><pre class="highlight javascript"><code>  <span class="nx">angular</span>
    <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'alert'</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'uiAlert'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">scope</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;div ng-transclude&gt;&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">transclude</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">};</span>
    <span class="p">});</span>
</code></pre></div>
<p>Mesmo assim, você ainda pode emitir eventos ou ler informações para o <code>$rootScope,</code> acessar e mudar o estado de escopo de cima através do <code>$scope.$parent</code> . Essa liberdade existe por causa da natureza do framework, que ficou bastante conhecido pela estrutura MV* e o famoso <em>two-way data binding</em>.</p>

<p>Escolhas e liberdades como essa são as maiores críticas que o Angular recebe. Isso acontence porque a <strong>divisão de responsabilidades</strong> dele é fácilmente burlável. Não é difícil encontrar projetos que possuem lógica de negócio em diretivas, o que muita vezes a torna stateful, quando como boa prática ela deveria <strong>apenas manipular o DOM</strong>.</p>

<p>Pensando em resolver esse problema, na versão 1.5, foi introduzido o <a href="https://docs.angularjs.org/guide/component"><strong>component method</strong></a>, e é sobre ele que vamos falar agora.</p>

<h2>Component Method do AngularJS</h2>

<p>Segundo a própria <a href="https://docs.angularjs.org/guide/component">documentação do Angular</a>, o <code>angular.component()</code> é um tipo especial de diretiva. Ele nos dá mais controle, e agora sabemos definitivamente quando algo deve ser stateless ou stateful. É importante lembrar que esse método não substitui o papel das diretivas. Pelo contrário, ele é até mais restritivo e serve para criarmos uma aplicação baseada em componentes.</p>

<p>A grande vantagem do método <code>component()</code> é permitir que uma aplicação seja <em>one-way dataflow</em>, sem o uso de <code>$scope</code>, <code>$rootScope</code> e afins. Além disso, a app ficará mais próxima de paradigmas do Angular2.</p>

<p>Para exemplificar, vamos ver o exemplo abaixo. Nesse caso, o alerta deve desaparecer quando digitado a string <code>angular</code> no input disponível.</p>

<p data-height="265" data-theme-id="dark" data-slug-hash="RKPoyw" data-default-tab="js,result" data-user="lfernahh" data-embed-version="2" data-pen-title="Angular Component App" class="codepen">See the Pen <a href="http://codepen.io/lfernahh/pen/RKPoyw/">Angular Component App</a> by Luiz Fernando Rodrigues (<a href="http://codepen.io/lfernahh">@lfernahh</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

<p>Perceba que quem mantém o estado é o componente mais externo, que é stateful. O componente de input diz ao seu pai qual o valor digitado no campo, e o pai irá alterar o estado da aplicação, fazendo com que o alerta desapareça.</p>

<p>O <code>angular.component()</code> possui <a href="https://toddmotto.com/angular-1-5-lifecycle-hooks">lifecycle hooks</a> que foram inspirados pelo React, a biblioteca que tem como objetivo criar uma app baseada nessa estrutura de componentes.</p>

<h2>React Component</h2>

<p>De forma simples, componentes React podem ser representados por uma função (ou classe) que recebe parâmetros (props) e retorna um markup através do método <code>render()</code> . Para exemplificar, vamos desenvolver nosso componente de alerta usando uma função pura e renderizá-lo através do React.</p>

<p data-height="265" data-theme-id="dark" data-slug-hash="VPKjKd" data-default-tab="js,result" data-user="lfernahh" data-embed-version="2" data-pen-title="React Alert Component" class="codepen">See the Pen <a href="http://codepen.io/lfernahh/pen/VPKjKd/">React Alert Component</a> by Luiz Fernando Rodrigues (<a href="http://codepen.io/lfernahh">@lfernahh</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

<p>A diferença entre usar uma função para definir componentes ao invés de extender a classe <code>React.Component</code> , é que extendendo a classe (ou usando o helper method <code>React.createClass()</code>) temos acesso aos chamados “<a href="https://facebook.github.io/react/docs/react-component.html#the-component-lifecycle">lifecycle methods</a>”. Através deles temos acesso sobre quando um componente será montando ou quando ele já está montando.</p>

<p>Agora que já sabemos, resumidamente, como funcionam implementações de componentes com React e AngularJS, vamos entender os conceitos stateful e stateless aplicados a componentes.</p>

<h2>Stateless Component</h2>

<p>Componentes stateless dizem <strong>como as coisas se parecem</strong>, ou seja, ele não mantém estado e nem pode alterá-lo. Suas responsabilidades são renderizar informações e emitir eventos para um componente stateful, que será responsável por manter o estado.</p>

<h2>Stateful Component</h2>

<p>Em março de 2015, <a href="https://twitter.com/dan_abramov">Dan Abramov</a> escreveu um artigo chamado <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.emwiglqtn">Presentional and Container Components</a>, que até hoje é usado como referência para explicar esse assunto. Na ocasião, ele divide componentes nessas duas categorias, que também são conhecidas com os termos <em>fat</em> e <em>skinny</em>, <em>smart</em> e <em>dumb</em> e o que ficou denotado, <em>stateful</em> e <em>stateless.</em></p>

<p>Abramov classifica <em>container components</em> (stateful) com uma série de items. Levando eles em consideração, podemos dizer que um componente stateful diz <strong>como as coisas funcionam</strong>, isso é: mantendo o estado e passando ele para outros componentes. Seu componente stateful será responsável por guardar o estado, fazer requisições ajax e compor uma parte de sua app. Na prática, um componente stateful é representado por componentes como <code>&lt;AppContainer&gt;</code> ,<code>&lt;NewsContainer&gt;</code> ou <code>&lt;UsersList&gt;</code> .</p>

<p>Vejamos o exemplo abaixo:</p>

<p data-height="265" data-theme-id="dark" data-slug-hash="mRrRzY" data-default-tab="js,result" data-user="lfernahh" data-embed-version="2" data-pen-title="React FrameworksContainer " class="codepen">See the Pen <a href="http://codepen.io/lfernahh/pen/mRrRzY/">React FrameworksContainer </a> by Luiz Fernando Rodrigues (<a href="http://codepen.io/lfernahh">@lfernahh</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

<p>Perceba que componente <code>&lt;FrameworksContainer&gt;</code> é quem possui o estado e passa o conteúdo para seu filho <code>&lt;FrameworkItem&gt;</code>, que é stateless.</p>

<h2>Conclusão</h2>

<p>Esses dois conceitos são os primeiros assuntos que você deve aprender ao começar a estudar frameworks que provem uma API para desenvolvimento de aplicações baseadas em componentes. Eles são o ponto de participa para concepção de conceitos que se tornaram absolutos em 2016 e serão fortemente cobrados pelo mercado em 2017. A partir da racionalização do estado em componentes para a web, React, Angular2, programação funcional e outros termos começam a fazer sentido em meio a tanta informação.</p>

<p>Espero ter ajudado!</p>

    </section>
    <div class="Share_Bar" data-share-bar data-share-title="Estado em componentes web">
  <a class="Share_Bar__Button Share_Bar__Button--twitter" data-share-item="twitter">
    <span class="Share_Bar__Button__Icon Share_Bar__Button__Icon--twitter"></span>
    <span class="Share_Bar__Button__Text Share_Bar__Button__Text--twitter">Tweet</span>
  </a>
  <button class="Share_Bar__Button Share_Bar__Button--facebook" type="button" data-share-item="facebook">
    <span class="Share_Bar__Button__Icon Share_Bar__Button__Icon--facebook"></span>
    <span class="Share_Bar__Button__Text Share_Bar__Button__Text--facebook">Share</span>
  </button>
</div>

  </article>
  <section class="Description">
  <img src="../assets/images/profile-7effcc39.jpg" alt="Profile" />
  <div class="Description__Content">
    <h1>@fernahh</h1>
    <p>
      Sou um desenvolvedor de software morando em São Paulo, SP.
      Atualmente trabalho como desenvolvedor front-end no time de design system
      da <a href="http://contaazul.com" title="Site da ContaAzul">Conta Azul</a>.
    </p>
  </div>
</section>


      <footer class="Footer">
  <div>
    <nav class="Navigation">
  <ul class="Navigation__List">
    <li class="Navigation__List__Item">
<a href="https://twitter.com/fernahh" class="Navigation__List__Item__Link" title="Link para o Twitter">        Twitter
</a>    </li>
    <li class="Navigation__List__Item">
<a href="https://github.com/fernahh" class="Navigation__List__Item__Link" title="Projetos no Github">        Github
</a>    </li>
    <li class="Navigation__List__Item">
<a href="https://www.linkedin.com/in/fernahh" class="Navigation__List__Item__Link" title="Perfil no LinkedIn">        LinkedIn
</a>    </li>
    <li class="Navigation__List__Item">
<a href="https://speakerdeck.com/fernahh" class="Navigation__List__Item__Link" title="Slides no Speaker Deck">        Palestras
</a>    </li>
    <li class="Navigation__List__Item">
      <a href="mailto:fernahh@gmail.com" class="Navigation__List__Item__Link">E-mail</a>
    </li>
  </ul>
</nav>

  </div>
</footer>

    </div>

    <script src="../assets/javascripts/application-a771cd06.js" type="text/javascript"></script>
  </body>
</html>
